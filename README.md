# 出席管理アプリ

お借りしたテンプレート：[electron-vite-react](https://github.com/electron-vite/electron-vite-react)

とある塾の自習室の出席管理システムとして作成したアプリです。  
Create-react-app で作成したアプリのひな型に、electron で windows デスクトップアプリケーションとしてビルドしています。  
2022/11 追記： 開発環境を webpack から vite に移行しました。

動作環境：windows 10(x64)上のみ動作を確認、Linux、mac には対応していません。

## 更新情報

### ver 1.0.0(2022/11~)

久々の大型 ver.up です。現在準備中ですので、徐々に追記します。

#### 2022/11/28

- 自動アップデート機能実装版（v0.1.5）を releases にアップロード

#### 2022/11/27

- main プロセス側のコードを全面的にリファクタリング
- github releases を用いたリリースに対応

#### 2022/11/25 ~ 26

- bundler を vite に変更
- リファクタリング作業と環境調整

---

## アプリケーションのインストールと実行

1. [releases のページ](https://github.com/taichimurakami-github/attendance-management/releases)にて最新版の **.exe** ファイルを取得（`Attendance-Management-Windows-xx.xx.xx-Setup.exe`）
2. ダウンロードした **.exe** ファイルを起動
   コード署名していないため、セキュリティ警告が出ると思いますが、気にせず「実行する」を押してください。
3. スクロールして「設定画面」を開き、「設定項目 → 生徒情報ファイルを設定する」より、生徒名簿ファイルを選択してください。

**生徒名簿ファイルのダミーデータは以下のリンク先の google drive よりダウンロードできます。「student-list-dummy.xlsx」というファイルをダウンロードしてください。**
動作確認時はダウンロードした xlsx ファイルを設定してください。

**[→ attendance-management google drive link](https://drive.google.com/drive/folders/103-NX63jaYSP1RC5ufwuEuIWxsSxFlff?usp=sharing)**

4. アプリケーションを再起動するか、ctrl + R でリロードすると生徒情報ファイルが読み込まれます。

なお、アプリのローカルデータは以下のパス内に保存されています。  
`~\AppData\Local\Programs\attendance-management\attendance-management.exe`

---

## アプリケーションの仕様

2022/11 追記： 執筆中です。

### 構成

package.json を参照のこと

### アプリケーション起動時

**`~\AppData\Roaming\attendance-management`**

- アプリ内ローカルデータ(設定ファイル、出席記録、アプリケーション状態のバックアップファイル)
- アプリ本体とその他ビルド関係のファイル

が出力されています。  
アプリ内ローカルデータは以下のディレクトリに保存されています。

**`~\AppData\Roaming\attendance-management\appLocalData\`**

このフォルダ内の構造は、以下のようになっています。

- config.json
- attendance/ (年度)(月)(日).json
- seats/ (年度)(月)(日).json

#### config.json について

アプリケーションの状態をローカルで保存するためのファイルです。基本的にいじらないでください。  
書き出しはアプリケーション側から自動的に行われます。  
主に外部ファイルの書き出し先、あるいは必要データの読み込み先のパスなどが格納されています。

#### attendance フォルダについて

生徒の出席記録を json 形式で出力するフォルダです。  
ファイル名は、アプリを使用した年度と日付となります。  
なお、JS の仕様上、日付は一桁でも "0" が入りません。

- ex) 2021 年 8 月 2 日に使用した場合："202182.json"というファイルが作成される

**出席記録を統計処理する際は、このディレクトリを参照してください。**

#### seats フォルダについて

アプリケーションの内部状態のバックアップとなるデータを格納します。いじらないでください。

## 不具合などの対応

### version 0.9.5

1. バックアップファイル読み込み時に不具合がある(？)  
   日付をまたいで、バックアップファイルが一新されるタイミングで何らかの不具合が起こることがあります。  
   再現性がないため、現在検証中です。キャッシュ関係の可能性もあるため、アプリの再インストールを行ってください。  
   なお、再インストールを行っても出席データなどは削除されません。
